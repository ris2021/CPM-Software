   10 CLEAR:S=0
   20 INPUT "размер поля",N
   30 INPUT "сложность",D
   40 DIM A(N,N),B$(2)
   45 B$(1)=CHR$(246)+CHR$(247):B$(2)=CHR$(248)+CHR$(249)
   50 CLS:PRINT CHR$(30)"зверята-ребята, это для вас, сложность:";D
   60 FOR I=1 TO D
   70 X=RND(N):Y=RND(N):GOSUB 300
   80 NEXT I
   90 X=1:Y=1
  100 FOR Y1=1 TO N
  110 PRINT TAB(2,Y1);
  120 FOR X1=1 TO N
  130 PRINT B$(A(X1,Y1)+1);
  140 NEXT X1
  150 NEXT Y1
  160 PRINT TAB(X*2,Y)"  ";
  170 GOSUB 510
  180 PRINT TAB(X*2,Y);
  190 PRINT B$(A(X,Y)+1);
  200 IF ASC(K$)=-1 THEN GOSUB 510
  210 IF ASC(K$)=-1 THEN 160
  220 IF K$=CHR$(19) THEN X=X-1:IF X<1 THEN X=X+1
  230 IF K$=CHR$(4) THEN X=X+1:IF X>N THEN X=X-1
  240 IF K$=CHR$(5) THEN Y=Y-1:IF Y<1 THEN Y=Y+1
  250 IF K$=CHR$(24) THEN Y=Y+1:IF Y>N THEN Y=Y-1
  260 IF K$=" " THEN GOSUB 300:GOSUB 590
  270 IF K$="Q" THEN GOTO 290
  275 IF K$="M" THEN S=1-S:IF S=0 THEN PUT 214,255:RESTORE
  280 GOTO 160
  290 PUT 214,255:CLS:PRINT "спасибо вам, зверята-ребята, за игру"CHR$(31):END
  300 A(X,Y)=1-A(X,Y)
  310 IF X>1 THEN A(X-1,Y)=1-A(X-1,Y)
  320 IF X<N THEN A(X+1,Y)=1-A(X+1,Y)
  330 IF Y>1 THEN A(X,Y-1)=1-A(X,Y-1)
  340 IF Y<N THEN A(X,Y+1)=1-A(X,Y+1)
  350 RETURN
  360 DATA 104,120,104,144,160,144,177,104,120,104,144,160,144,177,104,88
  370 DATA 80,80,80,104,88,88,88,120,104,120,136,120,105,104,120,104
  380 DATA 144,160,144,177,104,120,104,144,160,144,177,104,88,80,80,80
  390 DATA 104,88,88,88,120,104,120,136,120,105,104,120,104,144,160,144
  400 DATA 177,104,120,104,144,160,144,177,104,88,80,80,80,104,88,88
  410 DATA 88,120,4
  420 I=224
  430 REPEAT
  440 READ V
  450 PUT I,V
  460 I=I+1
  470 UNTIL I=240 OR V=4
  480 PUT 214,64+20
  490 IF V=4 THEN RESTORE
  500 GOTO 520
  510 PUT 222,50
  520 IF S=0 THEN 540
  530 IF GET(214)=0 THEN GOTO 420
  540 K$=INKEY$(0)
  550 IF ASC(K$)<>-1 THEN 570
  560 IF GET(222)>0 THEN 520
  570 PUT 222,0
  580 RETURN
  590 PRINT TAB(X*2,Y);B$(A(X,Y)+1);
  600 IF X>1 THEN PRINT TAB((X-1)*2,Y);B$(A(X-1,Y)+1);
  610 IF X<N THEN PRINT TAB((X+1)*2,Y);B$(A(X+1,Y)+1);
  620 IF Y>1 THEN PRINT TAB(X*2,Y-1);B$(A(X,Y-1)+1);
  630 IF Y<N THEN PRINT TAB(X*2,Y+1);B$(A(X,Y+1)+1);
  640 RETURN
